var h,l=this,aa=function(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b},ba=function(a,b){function c(){}c.prototype=b.prototype;a.Gb=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.Eb=function(a,c,g){for(var f=Array(arguments.length-2),k=2;k<arguments.length;k++)f[k-2]=arguments[k];return b.prototype[c].apply(a,f)}};var m={},n={},ca=!1,p=function(a){try{ca&&window.console&&window.console.log&&window.console.log(a)}catch(b){}},r=function(a,b){if(!a)return-1;if(a.indexOf)return a.indexOf(b,void 0);for(var c=0,e=a.length;c<e;c++)if(a[c]===b)return c;return-1},u=function(a,b){function c(){}if(!a)throw"Child class cannot be empty.";if(!b)throw"Parent class cannot be empty.";c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a},da=function(a){var b=[],c;for(c in a)if(a.hasOwnProperty(c)){var e=a[c];
if(null===e||void 0===e)e="";b.push(encodeURIComponent(c)+"="+encodeURIComponent(e))}return b.join("&")},ea=function(a){a=(new RegExp("[&#]"+a+"=([^&]*)")).exec(window.location.hash);return null==a?"":decodeURIComponent(a[1].replace(/\+/g," "))},fa=function(a,b){var c=window;if(c.addEventListener)c.addEventListener(a,b,!1);else if(c.attachEvent)c.attachEvent("on"+a,b);else throw"Add event handler for "+a+" failed.";},ga=function(a){fa("message",a)},ha=function(a,b){for(var c=(a||"").split(" "),e=
(b||"").split(" "),d=0;d<e.length;d++)if(e[d]&&0>r(c,e[d]))return!1;return!0},ia=function(){return Object.hasOwnProperty.call(window,"ActiveXObject")&&!window.ActiveXObject},ja=function(){var a=navigator.userAgent;return!!a&&/Edge\/\d+/.test(a)},ka=function(){var a=navigator.userAgent;return!!a&&-1!=a.indexOf("CriOS")},v=function(a){this.Oa=a||[];this.F={}};
v.prototype.addEventListener=function(a,b){if(!(0<=r(this.Oa,a)))throw"Unrecognized event type: "+a;if("[object Function]"!==Object.prototype.toString.call(b))throw"The listener for event '"+a+"' is not a function.";this.F[a]||(this.F[a]=[]);0>r(this.F[a],b)&&this.F[a].push(b)};v.prototype.dispatchEvent=function(a){var b=a.type;if(!(b&&0<=r(this.Oa,b)))throw"Failed to dispatch unrecognized event type: "+b;if(this.F[b]&&this.F[b].length)for(var c=0,e=this.F[b].length;c<e;c++)this.F[b][c](a)};
var m=m||{},w=function(){};w.prototype.getItem=function(){throw Error("unimplemented abstract method");};w.prototype.setItem=function(){throw Error("unimplemented abstract method");};w.prototype.removeItem=function(){throw Error("unimplemented abstract method");};var x=function(){};u(x,w);x.prototype.pa=function(a){this.$=a||window.localStorage};x.prototype.getItem=function(a,b){var c=this.$.getItem(a);b(c)};
x.prototype.setItem=function(a,b,c){void 0===b||null===b?this.$.removeItem(a):this.$.setItem(a,b);c&&c()};x.prototype.removeItem=function(a,b){this.$.removeItem(a);b&&b()};var y=function(){};u(y,w);y.prototype.pa=function(a){var b=this,c=window.indexedDB.open("oauth");c.onsuccess=function(c){b.la=c.target.result;a()};c.onupgradeneeded=function(a){a.target.result.createObjectStore("oauth")}};
y.prototype.getItem=function(a,b){var c=this.la.transaction("oauth","readwrite").objectStore("oauth").get(a);c.onsuccess=function(){b(c.result)}};y.prototype.setItem=function(a,b,c){var e=this.la.transaction("oauth","readwrite").objectStore("oauth");if(void 0===b||null===b)e["delete"](a);else e.put(b,a);e.transaction.oncomplete=function(){c&&c()}};
y.prototype.removeItem=function(a,b){var c=this.la.transaction("oauth","readwrite").objectStore("oauth");c["delete"](a);c.transaction.oncomplete=function(){b&&b()}};var z=function(a){this.Ka=a;v.call(this,["storageValueChanged"])};u(z,v);var la=function(a,b){m.Y.getItem(a.Ka,b)};z.prototype.addListener=function(a){this.addEventListener("storageValueChanged",a)};z.prototype.start=function(){var a=this;la(this,function(b){a.pb=b;a.La=0;a.qa=window.setInterval(ma(a),200)})};
z.prototype.stop=function(){void 0!==this.qa&&(clearInterval(this.qa),this.qa=void 0)};
var ma=function(a){return function(){a.La++;la(a,function(b){b!=a.pb?(a.dispatchEvent({type:"storageValueChanged",key:a.Ka,newValue:b}),a.stop()):1500<=a.La&&a.stop()})}},na=function(a){var b=0,c,e,d;if(a)for(c=0,d=a.length;c<d;c++)e=a.charCodeAt(c),b=(b<<5)-b+e,b|=0;return b},B=function(a){return!!a&&0<=a.indexOf(A.l)},oa=function(a,b){if(!a&&!b)return!0;if(!a||!b)return!1;var c=a.extraQueryParams,e=b.extraQueryParams;if(!c&&!e)return!0;if(!c||!e||Object.keys&&Object.keys(c).length!=Object.keys(e).length)return!1;
for(var d in c)if(c[d]!==e[d])return!1;if(!Object.keys)for(d in e)if(c[d]!==e[d])return!1;return!0},A=A||{};A.ga="SID";A.Ca="SSID";A.Qa=100;A.Ea="/oauth2/sessionstate/action/updateState";A.xa="/oauth2/sessionstate/action/checkOrigin";A.Aa="/oauth2/permission/action/refresh";A.fa="/oauth2/permission/action/listSessions";A.Ta="/o/oauth2/revoke";A.l="::";A.ea="_ss_";A.za="_tr_";A.ha="oauth2_ss";A.ya="oauth2_cs";A.Da="oauth2_tr";A.Ra="oauth2_is";A.ca="oauth2_ar";
A.Cb=function(){var a={ea:1,za:2,ha:3,ya:4,Da:5,ca:6},b;for(b in a)if(a=A[b],!a||0<=a.indexOf(A.l))throw"Invalid value for 'oauth2.spi."+b+"'.";};A.Cb();A.Sa=512;A.Ua=function(a){var b;(b=void 0===a.hint)||(b=a.hint,b=(""===b?!0:b?"string"==typeof b||"object"==typeof b&&b.constructor===String:!1)&&a.hint.length<=A.Sa);return!a.id&&b};A.fb=function(){return"https:"==window.location.protocol?A.Ca:A.ga};n=n||{};
n.N=function(a){var b,c=n.cb();c&&(a=c.match("(^|;) ?"+a+"=([^;]*)(;|$)"))&&2<a.length&&(b=a[2]);return b};n.bb=function(a){var b;(a=n.N(a))&&(b=String(na(a)));return b};n.cb=function(){return document.cookie};n.da="cookieValueChanged";var pa=function(a,b){this.Ga=a;this.ib=b;v.call(this,[n.da])};u(pa,v);pa.prototype.N=function(){return n.N(this.Ga)};var C=function(a){return n.bb(a.Ga)};pa.prototype.addListener=function(a){this.addEventListener(n.da,a)};
var ra=function(a){void 0!==a.va&&(window.clearInterval(a.va),a.va=void 0,p("IDP Session Cookie monitor is stoped."));a.aa=a.N();a.va=window.setInterval(qa(a),a.ib);p("IDP Session Cookie monitor is started.")},qa=function(a){return function(){var b=a.N();if(a.aa!=b){var c={type:n.da,newHash:b&&na(b),oldHash:a.aa&&na(a.aa)};a.aa=b;a.dispatchEvent(c)}}},sa=function(a,b){this.b=a;this.Pa=b},ta=function(a,b,c){var e=A.Ta,d=new XMLHttpRequest;d.onreadystatechange=function(){if(4==d.readyState&&200==d.status){var a;
d.responseText&&(a=window.JSON.parse(d.responseText));c(a)}};d.open("POST",e,!0);d.setRequestHeader("Content-type","application/x-www-form-urlencoded");var g="xsrfToken=";a.Pa&&(g+=a.Pa);if(b)for(var f in b)f&&b[f]&&(g+="&"+f+"="+encodeURIComponent(b[f]));p("Call "+e+" with postData: "+g);d.send(g)},D=function(a,b,c,e,d){var g=new XMLHttpRequest;g.onreadystatechange=function(){if(4==g.readyState&&200==g.status){var a;g.responseText&&(a=window.JSON.parse(g.responseText));e(a)}};if(b=da(b))a+=0>a.indexOf("?")?
"?":"&",a+=b;g.open("GET",a,!0);d&&(g.withCredentials=!0);if(c)for(var f in c)if(c.hasOwnProperty(f)){d=c[f];if(null===d||void 0===d)d="";g.setRequestHeader(f,d)}p("Call "+a+" with Get method.");g.send()},ua=function(a,b,c){D(A.xa,{origin:a.b,client_id:b},null,c,!1)},va=function(a,b,c){b&&b.length?D(A.Ea,{login_hint:b.join(" "),origin:a.b},null,c,!1):c({activeHints:{}})},wa=function(a,b,c){b.origin=a.b;delete b.redirect_uri;delete b.app_package_name;D(A.Aa,b,null,c,!1)},xa=function(a,b,c){b.origin=
a.b;b.redirect_uri=void 0;b.response_type=void 0;b.app_package_name=void 0;D(A.fa,b,null,c,!1)},ya=function(a,b,c){ta(a,{token:b},c)},m=m||{},za=function(){};za.prototype.w=function(){return!1};var Aa={};m.rb=function(){var a=new E;if(!a)throw"policy cannot be empty.";if(m.Ia("DEFAULT"))throw"Duplicate policyName [DEFAULT].";Aa.DEFAULT=a};m.Ia=function(a){for(var b in Aa)if(a==b)return!0;return!1};m.Ha=function(a){return a&&m.Ia(a)?a:"DEFAULT"};m.eb=function(a){return Aa[m.Ha(a)]};
m.w=function(a,b,c,e){return m.eb(e).w(a,b,c)};m.Fb=function(a,b,c,e){if(!m.w(a,b,c,e))throw"permission_error";};var Ba=function(){};u(Ba,za);Ba.prototype.w=function(a,b,c){a=c?this.na(a):this.oa(a);return 0<=r(a,b)};Ba.prototype.oa=function(a){var b=[];if(a&&(b.push(a),"http://"==a.substring(0,7)||"https://"==a.substring(0,8))){var c=document.createElement("a");c.href=a;a!=c.protocol+"//"+c.hostname&&b.push(c.protocol+"//"+c.hostname);"https:"==c.protocol&&b.push("http://"+c.hostname)}return b};
Ba.prototype.na=function(a){var b=[];if(a){b.push(a);var c=document.createElement("a");c.href=a;if("http:"==c.protocol||"https:"==c.protocol)for(a=c.hostname.split(".");1<a.length;)b.push(c.protocol+"//"+a.join(".")),"https:"==c.protocol&&b.push("http://"+a.join(".")),a.shift()}return b};var E=function(){};u(E,za);E.prototype.w=function(a,b,c){a=c?this.na(a):this.oa(a);return 0<=r(a,b)};
E.prototype.oa=function(a){var b=[];if(a&&(b.push(a),"https://"==a.substring(0,8))){var c=document.createElement("a");c.href=a;""!=c.port&&0!=c.port&&443!=c.port||b.push("http://"+c.hostname)}return b};
E.prototype.na=function(a){var b=[];if(a){var c=document.createElement("a");c.href=a;if("https:"==c.protocol&&(""==c.port||0==c.port||443==c.port)||"http:"==c.protocol&&(""==c.port||0==c.port||80==c.port))for(a=c.hostname.split(".");1<a.length;)b.push(c.protocol+"//"+a.join(".")),"https:"==c.protocol&&b.push("http://"+a.join(".")),a.shift();else b.push(a)}return b};m.rb();m.C={J:"sessionStorage",Ba:"localStorage",Db:"indexedDB"};var Ca=function(){};Ca.prototype.G=function(){return m.C.J};
var F=function(a){return a.G()==m.C.J?window.sessionStorage:m.Y};h=Ca.prototype;h.g=function(){throw Error("unimplemented abstract method");};h.M=function(){throw Error("unimplemented abstract method");};h.s=function(){throw Error("unimplemented abstract method");};h.ia=function(){throw Error("unimplemented abstract method");};h.j=function(){throw Error("unimplemented abstract method");};h.ja=function(){throw Error("unimplemented abstract method");};var G=function(){};u(G,Ca);
G.prototype.s=function(a,b){if(this.G()!=m.C.J)throw Error("The sync version getValue() can only be used by sessionStorage.");var c,e=this.g(a),d=F(this).getItem(e);if(d)try{var g=window.JSON.parse(d);g.cookieHash!=b?F(this).removeItem(e):c=g&&g.cachedValue}catch(f){}return c};G.prototype.ia=function(a,b,c){var e=this,d=this.g(a);F(this).getItem(d,function(a){var f;if(a)try{var k=window.JSON.parse(a);if(k.cookieHash!=b){F(e).removeItem(d,function(){c(void 0)});return}f=k&&k.cachedValue}catch(q){}c(f)})};
G.prototype.j=function(a,b,c){if(this.G()!=m.C.J)throw Error("The sync version setValue() can only be used by sessionStorage.");a=this.g(a);void 0===b||null===b?F(this).removeItem(a):F(this).setItem(a,JSON.stringify({cookieHash:c,cachedValue:b}))};G.prototype.ja=function(a,b,c,e){a=this.g(a);void 0===b||null===b?F(this).removeItem(a,e):(b=JSON.stringify({cookieHash:c,cachedValue:b}),F(this).setItem(a,b,e))};var H=function(){};u(H,Ca);
H.prototype.s=function(a){if(this.G()!=m.C.J)throw Error("The sync version getValue() can only be used by sessionStorage.");var b;if(a=F(this).getItem(this.g(a)))try{var c=window.JSON.parse(a);b=c&&c.cachedValue}catch(e){}return b};H.prototype.ia=function(a,b,c){F(this).getItem(this.g(a),function(a){var b;if(a)try{var g=window.JSON.parse(a);b=g&&g.cachedValue}catch(f){}c(b)})};
H.prototype.j=function(a,b){if(this.G()!=m.C.J)throw Error("The sync version setValue() can only be used by sessionStorage.");var c=this.g(a);void 0===b||null===b?F(this).removeItem(c):F(this).setItem(c,JSON.stringify({cachedValue:b}))};H.prototype.ja=function(a,b,c,e){a=this.g(a);void 0===b||null===b?F(this).removeItem(a,e):(b=JSON.stringify({cachedValue:b}),F(this).setItem(a,b,e))};var I=function(){};u(I,H);I.prototype.G=function(){return m.C.Ba};
I.prototype.g=function(a){return[A.ca,a.origin,a.a,a.id].join(A.l)};I.prototype.M=function(a){var b={};a&&(a=a.split(A.l),4==a.length&&(b.origin=a[1],b.a=a[2],b.id=a[3]));return b};var Da=function(){};u(Da,G);Da.prototype.g=function(a){return[A.ya,a.origin,a.a].join(A.l)};Da.prototype.M=function(a){a=a.split(A.l);var b={};3==a.length&&(b.origin=a[1],b.a=a[2]);return b};var J=function(){};u(J,G);J.prototype.g=function(a){return[A.Ra,a.origin,a.a].join(A.l)};
J.prototype.s=function(a,b){var c,e=G.prototype.s.call(this,a,b);e&&e.expires_at&&(6E4>e.expires_at-(new Date).getTime()?window.sessionStorage.removeItem(this.g(a)):ha(e.scope,a.scope)&&ha(a.scope,e.scope)?(c=e,c.Xa=Math.floor((c.expires_at-(new Date).getTime())/1E3)):window.sessionStorage.removeItem(this.g(a)));return c};J.prototype.j=function(a,b,c){var e;b&&b.expires_at&&18E4<b.expires_at-(new Date).getTime()&&(e=b);G.prototype.j.call(this,a,e,c)};var K=function(){};u(K,H);K.prototype.G=function(){return m.C.Ba};
K.prototype.g=function(a){return[A.ha,a.domain,a.U?"1":"0",m.Ha(a.H),a.id||A.ea].join(A.l)};K.prototype.M=function(a){a=a.split(A.l);var b={};5==a.length&&(b.domain=a[1],b.U="1"==a[2],b.H=a[3],b.id=a[4]);"DEFAULT"==b.H&&delete b.H;b.id==A.ea&&delete b.id;return b};var L=function(a){this.ob=a||A.Da};u(L,G);L.prototype.g=function(a){return[this.ob,a.origin,a.a,a.id||A.za].join(A.l)};
L.prototype.s=function(a,b){var c=G.prototype.s.call(this,a,b);if(c&&c.R&&c.R.expires_at){if(a.lb==c.R.login_hint&&!(6E4>c.R.expires_at-(new Date).getTime())&&ha(c.R.scope,a.scope)&&ha(c.responseType,a.responseType))return c=c.R,c.Xa=Math.floor((c.expires_at-(new Date).getTime())/1E3),c;window.sessionStorage.removeItem(this.g(a))}};L.prototype.j=function(a,b,c){var e;b&&b.expires_at&&18E4<b.expires_at-(new Date).getTime()&&(e={R:b,responseType:a.responseType});G.prototype.j.call(this,a,e,c)};
var Ea=function(a,b){this.b=a;this.ta=b;this.X={};this.W={}},Fa=function(a,b){if(!b)throw"message object cannot be null.";b.rpcToken=a.ta;var c=JSON.stringify(b);p("IDP IFrame sends message: "+c);window.parent.postMessage(c,a.b)},M=function(a,b,c){b&&Fa(a,{id:b,result:c})};
Ea.prototype.qb=function(a){if(a.source==window.parent&&a.origin==this.b){p("IDP Session State IFrame receive message:"+a.data);try{var b=window.JSON.parse(a.data)}catch(c){return}(b.rpcToken||this.ta)&&b.rpcToken!=this.ta?p("RPC token mismatch."):b&&b.method&&this.X[b.method]?(a=this.X[b.method],a.rpcIdRequired&&!b.id?p("Bad request."):a.validator&&!a.validator(b)?(p("Bad request."),Fa(this,{id:b.id,error:"Bad request."})):a.handler(b)):p("Bad request.")}};
var N=function(a,b){if(b&&b.type&&a.W[b.type]){var c=a.W[b.type].filter;c&&!c(b)||Fa(a,{method:"fireIdpEvent",params:b})}else p("Invalid event type.")},Ga=function(a,b){a.X={};a.W={};if(b){if(b.rpcs)for(var c=0;c<b.rpcs.length;c++){var e=b.rpcs[c];if(!e.method||!e.handler)throw"Error in RPC policy: method or handler is empty.";if(a.X[e.method])throw"Error in RPC policy: duplicate entry for RPC '"+e.method+"'.";a.X[e.method]={handler:e.handler,rpcIdRequired:e.rpcIdRequired,validator:e.validator}}if(b.events)for(c=
0;c<b.events.length;c++){e=b.events[c];if(!e.type)throw"Error in Event policy: type is empty.";if(a.W[e.type])throw"Error in Event policy: duplicate entry for type '"+e.type+"'.";a.W[e.type]={filter:e.filter}}}},Ha=function(a,b,c,e){N(a,{type:"sessionStateChanged",clientId:b,user:c,sessionState:e})},Ia=function(a){var b=new K,c=A.ha+A.l;return function(e){if(e.key&&0===e.key.indexOf(c)){var d=b.M(e.key);if(m.w(a.b,d.domain,d.U,d.H)){var g;if(e.newValue)try{var f=JSON.parse(e.newValue);f&&(g=f.cachedValue)}catch(k){return}N(a,
{type:"sessionSelectorChanged",newValue:g,crossSubDomains:d.U,domain:d.domain,policy:d.H,id:d.id})}}}},Ja=function(a){var b=new I,c=[A.ca,a.b].join(A.l)+A.l;return function(e){if(e.key&&0===e.key.indexOf(c)&&e.newValue){var d;try{d=window.JSON.parse(e.newValue)}catch(g){return}d&&d.cachedValue&&(e=b.M(e.key),N(a,{type:"authResult",clientId:e.a,id:e.id,authResult:d.cachedValue}))}}},Ka=function(a,b){this.b=a;this.v=b;this.Fa=new Da;this.Ma=new K;this.wa=new L;this.O=new J},La=function(a,b,c,e){a.Fa.j({origin:a.b,
a:b},{user:c.B,session:c.B?c.I:void 0},e)},Ma=function(a,b){return a.Fa.s({origin:a.b,a:b},C(a.v))},Na=function(a,b,c,e,d,g){return a.wa.s({lb:b,origin:a.b,a:c,responseType:e,scope:d,id:g},C(a.v))},Oa=function(a,b,c,e,d,g){if(!a.w(b,c,d))throw"Permission denied for '"+a.b+"' to read session selector for domain '"+b+"'.";a.Ma.ia({domain:b,U:c,H:d,id:e},void 0,function(a){g(a)})},Pa=function(a,b,c,e,d,g,f){if(!a.w(b,c,g))throw"Permission denied for '"+a.b+"' to write session selector for domain '"+
b+"'.";a.Ma.ja({domain:b,U:c,H:g,id:d},e,void 0,f)};Ka.prototype.w=function(a,b,c){return m.w(this.b,a,b,c)};
var Qa=function(a,b,c){return a.O.s({origin:a.b,a:b,scope:c},C(a.v))},Ra=function(a,b,c){this.L=a;this.c=b;this.h=c},Sa=function(a,b,c){a.B?c&&void 0!==c[a.B]?(c=c[a.B],oa(a.I,c)||(a.I=c,La(a.h,a.L,a,b),Ha(a.c,a.L,a.B,a.I))):a.I&&(a.I=void 0,La(a.h,a.L,a,b),Ha(a.c,a.L,a.B,void 0)):b&&Ha(a.c,a.L,a.B,void 0)},Ua=function(a,b,c,e){this.v=a;this.c=b;this.f=c;this.h=e;this.V=void 0;this.u={};this.ua=[];var d=this;this.v.addListener(function(a){Ta(d,a)})},Va=function(a){var b=[],c;for(c in a.u){var e=a.u[c].B;
e&&b.push(e)}return b},Ta=function(a,b){if(b.newHash)va(a.f,Va(a),function(c){for(var d in a.u)Sa(a.u[d],b.newHash,c&&c.activeHints)});else for(var c in a.u)Sa(a.u[c],b.newHash,void 0)},Wa=function(a,b,c,e){var d=a.u[b];d||(d=new Ra(b,a.c,a.h),a.u[b]=d);a=d;b=c.login_hint;c=c.session_state;a.B!=b&&(a.B=b,a.I=b?c:void 0,La(a.h,a.L,a,e))},Xa=function(a,b,c){var e=a.u[b];if(e)c(!0);else{var d=Ma(a.h,b);d?(e=new Ra(b,a.c,a.h),a.u[b]=e,e.B=d.user,e.I=d.session,c(!0)):ua(a.f,b,function(e){e&&e.valid?(e=
new Ra(b,a.c,a.h),a.u[b]=e,La(a.h,b,e,C(a.v)),c(!0)):c(!1)})}},Ya=function(a,b){ia()||ja()||ka()?a.ua.push(b):fa("storage",b)},P=function(a,b,c){this.b=a;this.c=new Ea(a,b);this.v=new pa(A.ga,A.Qa);this.f=new sa(a,c);this.h=new Ka(a,this.v);this.D=new Ua(this.v,this.c,this.f,this.h)};h=P.prototype;
h.start=function(){Ga(this.c,this.ka());var a=this;ga(function(){a.c.qb.apply(a.c,arguments)});Ya(this.D,Ia(this.c));Ya(this.D,Ja(this.c));ra(this.v);var b=function(){N(a.c,{type:"idpReady"});p("Initialize IDP IFrame successfully.")};ia()||ja()?(m.Y=new y,m.Y.pa(b)):(m.Y=new x,m.Y.pa(void 0),b())};h.mb=function(a){var b=this;Xa(this.D,(a.params||{}).clientId,function(c){M(b.c,a.id,c)})};
h.Za=function(a){var b=a.params||{},c=this,e=b.clientId,d=b.loginHint,g=b.request,f=b.sessionSelector;g.client_id=e;g.login_hint=d;g.ss_domain=f.domain;var k=C(this.v);if(k){if(!b.forceRefresh&&(d=Na(this.h,d,e,g.response_type,g.scope,b.id))&&18E4<d.expires_at-(new Date).getTime()){Wa(this.D,e,d,k);M(c.c,a.id,d);return}wa(this.f,g,function(d){if(d&&!d.error&&d.login_hint){d.first_issued_at=(new Date).getTime();d.expires_at=d.first_issued_at+1E3*d.expires_in;d.session_state||(d.session_state={});d.scope||
(d.scope=g.scope);var f=c.h;f.wa.j({origin:f.b,a:e,responseType:g.response_type,id:b.id},d,k);Wa(c.D,e,d,k)}d=d||{};M(c.c,a.id,d)})}else M(c.c,a.id,{error:"user_logged_out"})};h.sb=function(a){var b=a.params||{},c=b.clientId,e=this;ya(this.f,b.token,function(b){var g=e.h;window.sessionStorage.removeItem(g.wa.g({origin:g.b,a:c}));M(e.c,a.id,b)})};
h.Ab=function(a){if(ia()||ja()||ka()){var b=a.params||{},c=(new I).g({a:b.clientId,id:b.id,origin:b.origin}),b=this.D;if(ia()||ja()||ka()){b.V&&b.V.stop();b.V=new z(c);for(c=0;c<b.ua.length;c++)b.V.addListener(b.ua[c]);b.V.start()}}M(this.c,a.id,!0)};h.Ya=function(a){var b=this,c=a.params||{};Oa(this.h,c.domain,c.crossSubDomains,c.id,c.policy,function(c){M(b.c,a.id,c)})};
h.yb=function(a){var b=a.params||{},c=b.hint,e=!!b.disabled,d=b.domain,g=b.crossSubDomains,f=b.id,k=b.policy,q=this,t;if(c||e)t={hint:c,disabled:e};Pa(this.h,d,g,t,f,k,function(){N(q.c,{type:"sessionSelectorChanged",newValue:t,domain:d,crossSubDomains:g,id:f,policy:k});M(q.c,a.id,!0)})};
h.jb=function(a){var b=a.params||{},c=this,e=function(b){M(c.c,a.id,b)},d=b.clientId,g=b.request,f=b.sessionSelector;g.client_id=d;g.response_type="id_token";g.ss_domain=f.domain;var k=C(this.v);if(k){if(!b.forceRefresh&&(b=Qa(this.h,d,g.scope))){e(b);return}xa(this.f,g,function(a){if(a&&!a.error){a.first_issued_at=(new Date).getTime();a.expires_at=a.first_issued_at+1E3*a.expires_in;a.scope=g.scope;var b=c.h;b.O.j({origin:b.b,a:d},a,k)}a=a||{error:"No response returned from Server."};e(a)})}else e({scope:g.scope,
sessions:[]})};h.nb=function(a){a=a&&a.params||{};return a.clientId&&!B(a.clientId)};h.hb=function(a){var b=a&&a.params||{};a=b.loginHint;var c=!B(b.id),e=b.clientId&&!B(b.clientId),d=!!b.request,g=d&&b.request.scope;(b=(d=d&&b.request.response_type)&&0<=b.request.response_type.indexOf("code"))&&p("Bad request: 'code' response_type is not supported.");return a&&c&&e&&g&&d&&!b};
h.gb=function(a){a=a&&a.params||{};var b=a.domain&&!B(a.domain),c=!B(a.policy);return!B(a.id)&&b&&c&&this.h.w(a.domain,!!a.crossSubDomains,a.policy)};h.zb=function(a){a=a&&a.params||{};var b=a.domain&&!B(a.domain),c=!B(a.policy);return!B(a.id)&&b&&c&&this.h.w(a.domain,!!a.crossSubDomains,a.policy)&&A.Ua(a)};h.kb=function(a){a=a&&a.params||{};var b=a.clientId&&!B(a.clientId),c=!!a.request&&a.request.scope;return!B(a.id)&&b&&c};
h.vb=function(a){a=a&&a.params||{};var b=!!a.token,c=a.clientId&&!B(a.clientId);return!B(a.id)&&b&&c};h.Bb=function(a){a=a&&a.params||{};var b=a.origin&&!B(a.origin),c=a.id&&!B(a.id);return a.clientId&&!B(a.clientId)&&b&&c};h.xb=function(a){var b;if(b=a.clientId)a=a.clientId,b=!(!a||!this.D.u[a]);return b};h.Va=function(a){var b;if(b=a.clientId)b=a.clientId,b=!(!b||!this.D.u[b]);return b&&a.id&&a.authResult};h.wb=function(a){return a.domain&&this.h.w(a.domain,a.crossSubDomains,a.policy)};
var Q=function(a,b){return function(){return b.apply(a,arguments)}};P.prototype.ka=function(){var a={rpcs:[],events:[]};Za(this,a);return a};
var Za=function(a,b){b.rpcs.push({method:"monitorClient",handler:Q(a,a.mb),rpcIdRequired:!1,validator:Q(a,a.nb)});b.rpcs.push({method:"getTokenResponse",handler:Q(a,a.Za),rpcIdRequired:!0,validator:Q(a,a.hb)});b.rpcs.push({method:"getSessionSelector",handler:Q(a,a.Ya),rpcIdRequired:!0,validator:Q(a,a.gb)});b.rpcs.push({method:"setSessionSelector",handler:Q(a,a.yb),rpcIdRequired:!1,validator:Q(a,a.zb)});b.rpcs.push({method:"listIdpSessions",handler:Q(a,a.jb),rpcIdRequired:!0,validator:Q(a,a.kb)});
b.rpcs.push({method:"revoke",handler:Q(a,a.sb),validator:Q(a,a.vb)});b.rpcs.push({method:"startPolling",handler:Q(a,a.Ab),validator:Q(a,a.Bb)});b.events.push({type:"idpReady"});b.events.push({type:"sessionStateChanged",filter:Q(a,a.xb)});b.events.push({type:"sessionSelectorChanged",filter:Q(a,a.wb)});b.events.push({type:"authResult",filter:Q(a,a.Va)})};var $a=function(a){if(Error.captureStackTrace)Error.captureStackTrace(this,$a);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))};ba($a,Error);var ab=function(a,b){for(var c=a.split("%s"),e="",d=Array.prototype.slice.call(arguments,1);d.length&&1<c.length;)e+=c.shift()+d.shift();return e+c.join("%s")};var bb=function(a,b){b.unshift(a);$a.call(this,ab.apply(null,b));b.shift()};ba(bb,$a);var cb=function(a,b,c){if(!a){var e="Assertion failed";if(b)var e=e+(": "+b),d=Array.prototype.slice.call(arguments,2);throw new bb(""+e,d||[]);}};var db=function(a){for(var b=[],c=0,e=0;e<a.length;e++){for(var d=a.charCodeAt(e);255<d;)b[c++]=d&255,d>>=8;b[c++]=d}return b};var R;a:{var eb=l.navigator;if(eb){var fb=eb.userAgent;if(fb){R=fb;break a}}R=""};var gb=-1!=R.indexOf("Opera")||-1!=R.indexOf("OPR"),hb=-1!=R.indexOf("Trident")||-1!=R.indexOf("MSIE"),ib=-1!=R.indexOf("Edge"),jb=-1!=R.indexOf("Gecko")&&!(-1!=R.toLowerCase().indexOf("webkit")&&-1==R.indexOf("Edge"))&&!(-1!=R.indexOf("Trident")||-1!=R.indexOf("MSIE"))&&-1==R.indexOf("Edge"),kb=-1!=R.toLowerCase().indexOf("webkit")&&-1==R.indexOf("Edge"),lb=function(){var a=R;if(jb)return/rv\:([^\);]+)(\)|;)/.exec(a);if(ib)return/Edge\/([\d\.]+)/.exec(a);if(hb)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);
if(kb)return/WebKit\/(\S+)/.exec(a)};(function(){if(gb&&l.opera){var a;var b=l.opera.version;try{a=b()}catch(c){a=b}return a}a="";(b=lb())&&(a=b?b[1]:"");return hb&&(b=(b=l.document)?b.documentMode:void 0,b>parseFloat(a))?String(b):a})();var mb=null;var nb=function(){this.m=-1};var S=function(a,b,c){this.m=-1;this.A=a;this.m=c||a.m||16;this.Ja=Array(this.m);this.sa=Array(this.m);a=b;a.length>this.m&&(this.A.update(a),a=this.A.digest(),this.A.reset());for(c=0;c<this.m;c++)b=c<a.length?a[c]:0,this.Ja[c]=b^92,this.sa[c]=b^54;this.A.update(this.sa)};ba(S,nb);S.prototype.reset=function(){this.A.reset();this.A.update(this.sa)};S.prototype.update=function(a,b){this.A.update(a,b)};
S.prototype.digest=function(){var a=this.A.digest();this.A.reset();this.A.update(this.Ja);this.A.update(a);return this.A.digest()};var T=function(){this.m=-1;this.m=64;this.i=Array(4);this.Wa=Array(this.m);this.ba=this.T=0;this.reset()};ba(T,nb);T.prototype.reset=function(){this.i[0]=1732584193;this.i[1]=4023233417;this.i[2]=2562383102;this.i[3]=271733878;this.ba=this.T=0};
var ob=function(a,b,c){c||(c=0);var e=Array(16);if("string"==typeof b)for(var d=0;16>d;++d)e[d]=b.charCodeAt(c++)|b.charCodeAt(c++)<<8|b.charCodeAt(c++)<<16|b.charCodeAt(c++)<<24;else for(d=0;16>d;++d)e[d]=b[c++]|b[c++]<<8|b[c++]<<16|b[c++]<<24;b=a.i[0];c=a.i[1];var d=a.i[2],g=a.i[3],f=0,f=b+(g^c&(d^g))+e[0]+3614090360&4294967295;b=c+(f<<7&4294967295|f>>>25);f=g+(d^b&(c^d))+e[1]+3905402710&4294967295;g=b+(f<<12&4294967295|f>>>20);f=d+(c^g&(b^c))+e[2]+606105819&4294967295;d=g+(f<<17&4294967295|f>>>
15);f=c+(b^d&(g^b))+e[3]+3250441966&4294967295;c=d+(f<<22&4294967295|f>>>10);f=b+(g^c&(d^g))+e[4]+4118548399&4294967295;b=c+(f<<7&4294967295|f>>>25);f=g+(d^b&(c^d))+e[5]+1200080426&4294967295;g=b+(f<<12&4294967295|f>>>20);f=d+(c^g&(b^c))+e[6]+2821735955&4294967295;d=g+(f<<17&4294967295|f>>>15);f=c+(b^d&(g^b))+e[7]+4249261313&4294967295;c=d+(f<<22&4294967295|f>>>10);f=b+(g^c&(d^g))+e[8]+1770035416&4294967295;b=c+(f<<7&4294967295|f>>>25);f=g+(d^b&(c^d))+e[9]+2336552879&4294967295;g=b+(f<<12&4294967295|
f>>>20);f=d+(c^g&(b^c))+e[10]+4294925233&4294967295;d=g+(f<<17&4294967295|f>>>15);f=c+(b^d&(g^b))+e[11]+2304563134&4294967295;c=d+(f<<22&4294967295|f>>>10);f=b+(g^c&(d^g))+e[12]+1804603682&4294967295;b=c+(f<<7&4294967295|f>>>25);f=g+(d^b&(c^d))+e[13]+4254626195&4294967295;g=b+(f<<12&4294967295|f>>>20);f=d+(c^g&(b^c))+e[14]+2792965006&4294967295;d=g+(f<<17&4294967295|f>>>15);f=c+(b^d&(g^b))+e[15]+1236535329&4294967295;c=d+(f<<22&4294967295|f>>>10);f=b+(d^g&(c^d))+e[1]+4129170786&4294967295;b=c+(f<<
5&4294967295|f>>>27);f=g+(c^d&(b^c))+e[6]+3225465664&4294967295;g=b+(f<<9&4294967295|f>>>23);f=d+(b^c&(g^b))+e[11]+643717713&4294967295;d=g+(f<<14&4294967295|f>>>18);f=c+(g^b&(d^g))+e[0]+3921069994&4294967295;c=d+(f<<20&4294967295|f>>>12);f=b+(d^g&(c^d))+e[5]+3593408605&4294967295;b=c+(f<<5&4294967295|f>>>27);f=g+(c^d&(b^c))+e[10]+38016083&4294967295;g=b+(f<<9&4294967295|f>>>23);f=d+(b^c&(g^b))+e[15]+3634488961&4294967295;d=g+(f<<14&4294967295|f>>>18);f=c+(g^b&(d^g))+e[4]+3889429448&4294967295;c=
d+(f<<20&4294967295|f>>>12);f=b+(d^g&(c^d))+e[9]+568446438&4294967295;b=c+(f<<5&4294967295|f>>>27);f=g+(c^d&(b^c))+e[14]+3275163606&4294967295;g=b+(f<<9&4294967295|f>>>23);f=d+(b^c&(g^b))+e[3]+4107603335&4294967295;d=g+(f<<14&4294967295|f>>>18);f=c+(g^b&(d^g))+e[8]+1163531501&4294967295;c=d+(f<<20&4294967295|f>>>12);f=b+(d^g&(c^d))+e[13]+2850285829&4294967295;b=c+(f<<5&4294967295|f>>>27);f=g+(c^d&(b^c))+e[2]+4243563512&4294967295;g=b+(f<<9&4294967295|f>>>23);f=d+(b^c&(g^b))+e[7]+1735328473&4294967295;
d=g+(f<<14&4294967295|f>>>18);f=c+(g^b&(d^g))+e[12]+2368359562&4294967295;c=d+(f<<20&4294967295|f>>>12);f=b+(c^d^g)+e[5]+4294588738&4294967295;b=c+(f<<4&4294967295|f>>>28);f=g+(b^c^d)+e[8]+2272392833&4294967295;g=b+(f<<11&4294967295|f>>>21);f=d+(g^b^c)+e[11]+1839030562&4294967295;d=g+(f<<16&4294967295|f>>>16);f=c+(d^g^b)+e[14]+4259657740&4294967295;c=d+(f<<23&4294967295|f>>>9);f=b+(c^d^g)+e[1]+2763975236&4294967295;b=c+(f<<4&4294967295|f>>>28);f=g+(b^c^d)+e[4]+1272893353&4294967295;g=b+(f<<11&4294967295|
f>>>21);f=d+(g^b^c)+e[7]+4139469664&4294967295;d=g+(f<<16&4294967295|f>>>16);f=c+(d^g^b)+e[10]+3200236656&4294967295;c=d+(f<<23&4294967295|f>>>9);f=b+(c^d^g)+e[13]+681279174&4294967295;b=c+(f<<4&4294967295|f>>>28);f=g+(b^c^d)+e[0]+3936430074&4294967295;g=b+(f<<11&4294967295|f>>>21);f=d+(g^b^c)+e[3]+3572445317&4294967295;d=g+(f<<16&4294967295|f>>>16);f=c+(d^g^b)+e[6]+76029189&4294967295;c=d+(f<<23&4294967295|f>>>9);f=b+(c^d^g)+e[9]+3654602809&4294967295;b=c+(f<<4&4294967295|f>>>28);f=g+(b^c^d)+e[12]+
3873151461&4294967295;g=b+(f<<11&4294967295|f>>>21);f=d+(g^b^c)+e[15]+530742520&4294967295;d=g+(f<<16&4294967295|f>>>16);f=c+(d^g^b)+e[2]+3299628645&4294967295;c=d+(f<<23&4294967295|f>>>9);f=b+(d^(c|~g))+e[0]+4096336452&4294967295;b=c+(f<<6&4294967295|f>>>26);f=g+(c^(b|~d))+e[7]+1126891415&4294967295;g=b+(f<<10&4294967295|f>>>22);f=d+(b^(g|~c))+e[14]+2878612391&4294967295;d=g+(f<<15&4294967295|f>>>17);f=c+(g^(d|~b))+e[5]+4237533241&4294967295;c=d+(f<<21&4294967295|f>>>11);f=b+(d^(c|~g))+e[12]+1700485571&
4294967295;b=c+(f<<6&4294967295|f>>>26);f=g+(c^(b|~d))+e[3]+2399980690&4294967295;g=b+(f<<10&4294967295|f>>>22);f=d+(b^(g|~c))+e[10]+4293915773&4294967295;d=g+(f<<15&4294967295|f>>>17);f=c+(g^(d|~b))+e[1]+2240044497&4294967295;c=d+(f<<21&4294967295|f>>>11);f=b+(d^(c|~g))+e[8]+1873313359&4294967295;b=c+(f<<6&4294967295|f>>>26);f=g+(c^(b|~d))+e[15]+4264355552&4294967295;g=b+(f<<10&4294967295|f>>>22);f=d+(b^(g|~c))+e[6]+2734768916&4294967295;d=g+(f<<15&4294967295|f>>>17);f=c+(g^(d|~b))+e[13]+1309151649&
4294967295;c=d+(f<<21&4294967295|f>>>11);f=b+(d^(c|~g))+e[4]+4149444226&4294967295;b=c+(f<<6&4294967295|f>>>26);f=g+(c^(b|~d))+e[11]+3174756917&4294967295;g=b+(f<<10&4294967295|f>>>22);f=d+(b^(g|~c))+e[2]+718787259&4294967295;d=g+(f<<15&4294967295|f>>>17);f=c+(g^(d|~b))+e[9]+3951481745&4294967295;a.i[0]=a.i[0]+b&4294967295;a.i[1]=a.i[1]+(d+(f<<21&4294967295|f>>>11))&4294967295;a.i[2]=a.i[2]+d&4294967295;a.i[3]=a.i[3]+g&4294967295};
T.prototype.update=function(a,b){void 0===b&&(b=a.length);for(var c=b-this.m,e=this.Wa,d=this.T,g=0;g<b;){if(0==d)for(;g<=c;)ob(this,a,g),g+=this.m;if("string"==typeof a)for(;g<b;){if(e[d++]=a.charCodeAt(g++),d==this.m){ob(this,e);d=0;break}}else for(;g<b;)if(e[d++]=a[g++],d==this.m){ob(this,e);d=0;break}}this.T=d;this.ba+=b};
T.prototype.digest=function(){var a=Array((56>this.T?this.m:2*this.m)-this.T);a[0]=128;for(var b=1;b<a.length-8;++b)a[b]=0;for(var c=8*this.ba,b=a.length-8;b<a.length;++b)a[b]=c&255,c/=256;this.update(a);a=Array(16);for(b=c=0;4>b;++b)for(var e=0;32>e;e+=8)a[c++]=this.i[b]>>>e&255;return a};var qb=function(a,b,c){b.origin=a.b;b.privileged=!0;b.redirect_uri=void 0;b.response_type=void 0;D(A.fa,b,pb(a),c,!1)},rb=function(a,b,c,e){D((window.NOW_SERVER_BASE_URL||"https://clients1.google.com")+"/nowapi/webauth",{origin:a.b,client_id:b,user_ids:c.join(";")},pb(a),e,!0)},sb=function(a,b,c){D("/o/oauth2/auth",{origin:a.b,client_id:b.client_id,login_hint:b.login_hint,response_type:"code",access_type:"offline",scope:"https://www.googleapis.com/auth/googlenow.publish",redirect_uri:"xhr",timestamp:b.timestamp,
signature:b.signature,signed_by:"google_now"},pb(a),c,!1)},U=function(a,b,c){D((window.NOW_SERVER_BASE_URL||"https://clients1.google.com")+"/nowapi/webAuthApiAnalytics",{origin:a.b,client_id:b,status:c},pb(a),function(){},!0)},pb=function(a){var b={},c=n.N(A.fb());if(c){a=a.b;if(!a||!c)throw Error("RP origin and session cookie value cannot be empty.");c=new S(new T,db(c));a=db(a);c.reset();c.update(a);c=c.digest();a=aa(c);cb("array"==a||"object"==a&&"number"==typeof c.length,"encodeByteArray takes an array as a parameter");
if(!mb)for(mb={},a=0;65>a;a++)mb[a]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(a);a=mb;for(var e=[],d=0;d<c.length;d+=3){var g=c[d],f=d+1<c.length,k=f?c[d+1]:0,q=d+2<c.length,t=q?c[d+2]:0,O=g>>2,g=(g&3)<<4|k>>4,k=(k&15)<<2|t>>6,t=t&63;q||(t=64,f||(k=64));e.push(a[O],a[g],a[k],a[t])}b["X-Csrf-Token"]=e.join("")}return b};var V=function(){};u(V,H);V.prototype.g=function(a){return["now_as",a.S,a.a||"ALL_CLIENTS"].join(A.l)};V.prototype.M=function(a){var b={};if(a){a=a.split(A.l);if("now_as"!==a[0]||3!=a.length)throw Error("Invalid assertion cache key.");b.S=a[1];b.a="ALL_CLIENTS"==a[2]?void 0:a[2]}return b};V.prototype.s=function(a,b){var c,e=H.prototype.s.call(this,a,b);e&&e.e&&(e.e<(new Date).getTime()?F(this).removeItem(this.g(a)):c=e.o);return c};
V.prototype.j=function(a,b,c){if(void 0!==b){var e=!!b;if(e&&!a.a)throw Error("Cannot cache all clients enabled for a user.");b={};b.o=e;b.e=(new Date).getTime()+864E5}H.prototype.j.call(this,a,b,c)};var W=function(){};u(W,G);W.prototype.g=function(a){return["now_gs",a.origin,a.a].join(A.l)};W.prototype.s=function(a,b){var c,e=G.prototype.s.call(this,a,b);e&&e.expires_at&&(e.expires_at<=(new Date).getTime()?F(this).removeItem(this.g(a)):(e.expires_at=void 0,c=e));return c};W.prototype.j=function(a,b,c){b&&(b.expires_at=(new Date).getTime()+864E5);G.prototype.j.call(this,a,b,c)};P.prototype.$a=function(a){var b=this;if(!tb(this,"getCode",a.id)){var c=ub(this,a);3<c.ma.length?(X(c,"THROTTLED","At most 3 email addresses can be used."),U(this.f,c.a,1)):c.Z?vb(this,c,!1,function(a){var d;try{d=wb(b,c,a)}catch(g){if("AUTH_EXISTS"==g.message){X(c,"AUTHORIZATION_EXISTS","Authorization already granted for the user.");U(b.f,c.a,3);return}throw g;}d.length?xb(b,c,d,function(a){yb(b,c,a.auth_request)}):(X(c,"DISABLED"),U(b.f,c.a,4))}):(X(c,"DISABLED"),U(this.f,c.a,2))}};
P.prototype.tb=function(a){var b=this;if(!tb(this,"revokeNow",a.id)){var c=ub(this,a);3<c.ma.length&&X(c,"THROTTLED","At most 3 email addresses can be used.");c.Z?vb(this,c,!0,function(a){a=wb(b,c,a,!0);if(a.length)for(var d=a.length,g=0;g<a.length;g++)zb(b,c.a,a[g],function(a){(a=a&&a.access_token)?ya(b.f,a,function(){d--;d||c.P({})}):(d--,d||c.P({}))});else c.P({})}):c.P({})}};
var tb=function(a,b,c){a.ra=a.ra||{};if(!a.ra[b])return a.ra[b]=!0,!1;M(a.c,c,{error:"THROTTLED",detail:"The "+b+"() method has already been invoked."});return!0},ub=function(a,b){var c=b.params||{},e={a:c.clientId,ma:c.emails,P:function(c){M(a.c,b.id,c)}};e.Z=C(a.v);e.Na={origin:a.b,a:c.clientId};return e},vb=function(a,b,c,e){a.O||(a.O=new W);if(!c&&(c=a.O.s(b.Na,b.Z))){e(c);return}qb(a.f,{client_id:b.a,scope:"https://www.googleapis.com/auth/googlenow.publish"},function(c){c&&c.sessions?(a.O.j(b.Na,
c,b.Z),e(c)):X(b,"OTHER","Failed to get Google session information.")})},wb=function(a,b,c,e){a.K||(a.K=new V);var d=[];if(c.sessions)for(var g=0;g<c.sessions.length;g++){var f=c.sessions[g],k;if(k=f.emails)a:{k=b.ma;for(var q=f.emails,t=0;t<k.length;t++)for(var O=0;O<q.length;O++)if(k[t]&&q[O]&&k[t].toLowerCase()===q[O].toLowerCase()){k=!0;break a}k=!1}if(k)if(e)f.login_hint&&d.push(f.login_hint);else{if(f.login_hint)throw Error("AUTH_EXISTS");if(f.obfuscatedGaiaId){k=a.K;q=f.obfuscatedGaiaId;t=
{S:q,a:b.a};if(k=!1===k.s({S:q})?!1:k.s(t))throw Error("AUTH_EXISTS");void 0===k&&d.push(f.obfuscatedGaiaId)}}}return d},xb=function(a,b,c,e){a.K||(a.K=new V);rb(a.f,b.a,c,function(d){if(d&&"DISABLED"!=d.status)if("THROTTLED"==d.status)X(b,"THROTTLED","Throttled by Google Now server."),U(a.f,b.a,7);else{var g;if(g="OK"==d.status)g=d.auth_request,g=!!g&&g.origin==a.b&&g.client_id==b.a&&0<g.timestamp&&!!g.signature&&"google_now"==g.signed_by&&0<=r(c,g.login_hint);if(g){g=a.K;var f=d.auth_request.login_hint,
k=b.a;g.j({S:f});g.j({S:f,a:k},!0);e(d)}else X(b,"OTHER","Unexpected response from Google Now server."),U(a.f,b.a,8)}else{f=g=!1;if(d.users&&d.users.length)for(k=0;k<d.users.length;k++){var q=d.users[k];q.user_id&&(a.K.j({S:q.user_id,a:q.disabled_for_all_clients?void 0:b.a},!1),q.disabled_for_all_clients?f=!0:g=!0)}X(b,"DISABLED");U(a.f,b.a,f&&!g?5:6)}})},yb=function(a,b,c){sb(a.f,c,function(c){c&&c.code?(b.P({code:c.code}),U(a.f,b.a,9)):c&&"immediate_failed"==c.error&&"policy_enforced"==c.error_subtype?
(X(b,"AUTHORIZATION_EXISTS","Failed to issue code due to existing authorization."),U(a.f,b.a,10)):(X(b,"OTHER",c.error||"Failed to get code."),U(a.f,b.a,11))})},zb=function(a,b,c,e){wa(a.f,{client_id:b,login_hint:c,response_type:"token",scope:"https://www.googleapis.com/auth/googlenow.publish"},e)},X=function(a,b,c){a.P({error:b,detail:c})};P.prototype.ab=function(a){a=a&&a.params||{};var b=a.emails,b=b&&Array.isArray(b)&&b.length;return a.clientId&&!B(a.clientId)&&b};P.prototype.ub=function(a){a=a&&a.params||{};var b=a.emails,b=b&&Array.isArray(b)&&b.length;return a.clientId&&!B(a.clientId)&&b};P.prototype.ka=function(){var a={rpcs:[],events:[]};Ab(this,a);return a};
var Ab=function(a,b){b.rpcs.push({method:"now:getCode",handler:Q(a,a.$a),rpcIdRequired:!0,validator:Q(a,a.ab)});b.rpcs.push({method:"now:revoke",handler:Q(a,a.tb),rpcIdRequired:!0,validator:Q(a,a.ub)})};P.prototype.ka=function(){var a={rpcs:[],events:[]};Za(this,a);Ab(this,a);return a};A.ga="APISID";A.Ca="SAPISID";A.Ea="/o/oauth2/iframerpc?action=sessionState";A.xa="/o/oauth2/iframerpc?action=checkOrigin";A.Aa="/o/oauth2/iframerpc?action=issueToken";A.fa="/o/oauth2/iframerpc?action=listSessions";var Bb=function(){var a=ea("origin");if(!a)throw"Failed to get parent origin from URL hash!";var b=ea("rpcToken");if(!b)throw"Failed to get rpcToken from URL hash!";var c=ea("debug");ca="0"!=c&&!!c;(new P(a,b)).start()},Y=["lso","startIdpIFrame"],Z=l;
Y[0]in Z||!Z.execScript||Z.execScript("var "+Y[0]);for(var Cb;Y.length&&(Cb=Y.shift());)Y.length||void 0===Bb?Z=Z[Cb]?Z[Cb]:Z[Cb]={}:Z[Cb]=Bb;
